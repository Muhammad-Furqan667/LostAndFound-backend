# Quick Fix: Enable Secure Logout

## The Problem
Currently, logging out doesn't actually stop the token from working. We need to create a "blacklist" table to store invalid tokens.

---

## Solution: Run This SQL in Supabase

1. **Go to Supabase Dashboard** → **SQL Editor**
2. **Copy and paste this:**

```sql
-- Create the table for blacklisted tokens
CREATE TABLE IF NOT EXISTS public.token_blacklist (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    token TEXT NOT NULL UNIQUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create an index for fast lookups
CREATE INDEX IF NOT EXISTS idx_token_blacklist_token ON public.token_blacklist(token);

-- Enable Row Level Security (optional but recommended)
ALTER TABLE public.token_blacklist ENABLE ROW LEVEL SECURITY;

-- Allow all access (since we use service role in backend)
CREATE POLICY "Allow all access to token_blacklist" ON public.token_blacklist
    FOR ALL USING (true) WITH CHECK (true);
```

3. **Click "Run"**

---

## Verify It Works

1. **Login** to get a token.
2. **Post an item** (should work).
3. **Logout** (`POST /api/users/logout` with token).
4. **Try to post again** with the SAME token.
   - **Expected Result:** `401 Unauthorized` ("Session expired. Please login again.")

✅ **Secure Logout is now active!**
